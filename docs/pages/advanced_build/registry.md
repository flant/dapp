---
title: Registry
sidebar: doc_sidebar
permalink: registry_for_advanced_build.html
folder: advanced_build
author: Alexey Igrychev <alexey.igrychev@flant.com>
---

## Авторизация

Перед тем как начать работу с registry, необходимо авторизоваться.

```shell
# для работы с Docker Hub
docker login 
```

```shell
# для работы с произвольным registry
docker login REPO
```

## Добавление приложений и кэша в registry

После авторизации и сборки можно добавить приложения и связанный кэш проекта в registry для соместной работы.

```
# добавление приложений
dapp dimg push REPO

# добавление приложений и кэша
dapp dimg push --with-stages REPO

# добавление только кэша
dapp dimg stages push REPO
```

При таком вызове приложения будут добавляться в registry в следующем формате `REPO:ИМЯ DIMG-TAG`, где:
* `ИМЯ DIMG`: имя приложение, соответствует указанному в Dappfile.
* `TAG`: одна из приведённых ниже схем тегирования.

| опция | описание |
| ----- | -------- |
| `--tag TAG` | произвольный тег TAG |
| `--tag-branch` | тег с именем ветки сборки |
| `--tag-commit` | тег с коммитом сборки |
| `--tag-build-id` | тег с идентификатором сборки |
| `--tag-ci` | тег, собранный из относящихся к сборке переменных окружения CI системы |

В случае, если необходимо опустить имя приложения при тегировании, т.е. использовать формат `REPO:TAG`, можно использовать команду `dapp dimg spush`.

При использовании безымянного приложения, такой формат будет так же использоваться при вызове `dapp dimg push`.

## Скачивание кэша из registry

Перед тем, как начать сборку приложений, необходимо проверить наличие кэша в registry, чтобы не выполнять сборку повторно.

```shell
# скачивание существующего кэша
dapp dimg stages pull REPO
``` 

## Удаление всех образов проекта из registry

После того, как проект перестал использоваться, можно удалить данные связанные с ним из registry следующей командой.

```shell
dapp dimg stages flush repo REPO
```
